<header>
  <a href="/dashboard" class="logo ajax-link">TETRA</a>

  <!-- Search Bar -->
  <form class="header-search" action="/search" method="GET">
    <input
      type="text"
      name="q"
      placeholder="Search music, artists..."
      aria-label="Search"
    />
    <button type="submit"><i class="fas fa-search"></i></button>
  </form>

  

<div class="mobile-search-overlay" id="mobileSearchOverlay">
  <input type="text" placeholder="Search..." />
</div>


  <div class="nav-links">
    <button class="mobile-search-icon" id="mobileSearchBtn">
  <i class="fas fa-search"></i>
</button>
    <a href="/charts" class="nav-item">
      <span class="nav-icon"><i class="fas fa-chart-bar"></i></span>
      <span class="nav-label">Charts</span>
    </a>
    <a href="/music" class="nav-item ajax-link">
      <span class="nav-icon"><i class="fas fa-music"></i></span>
      <span class="nav-label">Music</span>
    </a>
    <a href="/notifications" class="nav-item">
      <span class="nav-icon"><i class="fas fa-bell"></i></span>
      <span class="nav-label">Notifications</span>
      <span class="notification-badge">3</span>
    </a>
    <div class="profile-container" id="profileDropdown">
      <div class="profile-pic" style="background-image: url('<%= pfpUrl %>');"></div>
      <div class="dropdown">
        <a href="/profile?acode=<%= userAcode %>">See Profile</a>
        <a href="/logout">Logout</a>
      </div>
    </div>
  </div>
</header>

<script>
  const mobileSearchBtn = document.getElementById("mobileSearchBtn");
  const mobileSearchOverlay = document.getElementById("mobileSearchOverlay");

  // Toggle overlay when search button is clicked
  mobileSearchBtn.addEventListener("click", (e) => {
    e.stopPropagation(); // Prevent event from bubbling up
    mobileSearchOverlay.classList.toggle("active");
  });

  // Prevent click inside input from closing overlay
  mobileSearchOverlay.addEventListener("click", (e) => {
    e.stopPropagation();
  });

  // Close overlay if clicking outside of it
  document.addEventListener("click", () => {
    mobileSearchOverlay.classList.remove("active");
  });
</script>
