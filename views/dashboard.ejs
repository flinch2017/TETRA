<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Music Dashboard | TETRA</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="/css/dashboard.css" />
  <link rel="stylesheet" href="/css/console_header.css" />
  <link rel="stylesheet" href="/css/music_bar.css" />
</head>
<body>
  <div class="fixed-header">
    <%- include('partials/console_header') %>
  </div>
  

  <main class="newsfeed">
  <% if (posts.length === 0) { %>
    <div style="text-align: center; margin-top: 3rem; color: rgba(255, 255, 255, 0.6); font-size: 1.1rem;">
      ðŸš« No posts yet. Stay tuned!
    </div>
  <% } else { %>
    <% posts.forEach(post => { %>
      <div class="post">
        <div class="post-header">
  <div class="post-user-info">
    <a href="/profile?acode=<%= post.acode %>">
      <div class="post-profile-pic" style="background-image: url('<%= post.posterPfpUrl %>');"></div>
    </a>
    <a href="/profile?acode=<%= post.acode %>" class="post-username">
      <%= post.displayName %>
    </a>
  </div>
  <div class="post-dropdown">
    <i class="fas fa-ellipsis-v post-dropdown-toggle"></i>
    <div class="post-dropdown-menu">
      <a href="#">Save</a>
      <a href="#">Report</a>
    </div>
  </div>
</div>



        <p><%= post.caption %></p>

        <% post.images.forEach(imgUrl => { 
             const filename = imgUrl.split('/').pop(); %>
          <img src="/media/image/<%= filename %>" alt="Post image" />
        <% }) %>

        <% post.tracks.forEach(trackUrl => {
             const filename = trackUrl.split('/').pop(); %>
          <audio controls src="/media/audio/<%= filename %>"></audio>
        <% }) %>

        <% post.videos.forEach(videoUrl => {
             const filename = videoUrl.split('/').pop(); %>
          <video controls src="/media/video/<%= filename %>" width="100%"></video>
        <% }) %>

        <div class="timestamp">Posted <%= post.timeAgo %></div>

        <div class="post-actions">
          <button title="Like"><i class="fas fa-heart"></i></button>
          <button title="Comment"><i class="fas fa-comment"></i></button>
          <button title="Share"><i class="fas fa-share"></i></button>
        </div>
      </div>
    <% }) %>
  <% } %>
</main>




<div class="fixed-bar">
    <%- include('partials/music_bar') %>
  </div>




<script src="/js/dashboard.js"></script>
<script src="/js/profile.js"></script>
<script src="/js/music_bar.js"></script>



</body>
</html>
