<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title><%= artist.name %> | TETRA</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.0/css/all.min.css" />
<link rel="stylesheet" href="/css/profile.css" />
<link rel="stylesheet" href="/css/dashboard.css" />
  <link rel="stylesheet" href="/css/console_header.css" />
  <link rel="stylesheet" href="/css/music_bar.css" />
</head>
<body>

<div class="fixed-header">
  <%- include('partials/console_header') %>
</div>



<div class="artist-header" style="background-image: url('<%= artist.bannerUrl %>')">
  <div class="overlay"></div>
  <% if (artist.rank && artist.rank <= 500) { %>
  <div class="artist-rank">
    #<%= artist.rank %>
  </div>
<% } %>


  <div class="artist-info">
    <div class="artist-name"><%= artist.name %></div>
    <div class="artist-follow"><%= artist.followers %> followers</div>
    <div class="header-actions">
      <button 
  class="follow-btn" 
  data-target="<%= artist.acode %>" 
  data-following="<%= isFollowing ? 'true' : 'false' %>">
  <%= isFollowing ? 'Following' : 'Follow' %>
</button>




      <div class="artist-dropdown">
        <i class="fas fa-ellipsis-v artist-dropdown-toggle"></i>
        <div class="artist-dropdown-menu">
          <% if (isOwnProfile) { %>
  <a href="/edit-profile?acode=<%= artist.acode %>">Edit Profile</a>
<% } %>

          <a href="#">Add to Favorites</a>
          <a href="#">Report</a>
          <a href="#">Block Artist</a>
        </div>
      </div>
    </div>
  </div>
</div>



<% if (isOwnProfile && (!artist.account_mode || artist.account_mode === 'regular')) { %>
  <div class="setup-artist-container">
    <a href="/edit-profile?acode=<%= artist.acode %>" class="setup-artist-btn">Setup Artist Profile</a>
  </div>
<% } %>



<main class="artist-profile">
  <div class="section">
  <h2>Popular Songs</h2>
  <% if (artist.songs && artist.songs.length > 0) { %>
    <% artist.songs.forEach(song => { %>
      <div class="song-item clickable-song" data-song-id="<%= song.id %>">
        <div class="song-info">
          <img src="<%= song.coverUrl %>" alt="Cover">
          <div>
            <div class="song-title"><%= song.title %></div>
            <div class="release-meta"><%= song.streams %> streams</div>
          </div>
        </div>
        <div class="song-actions">
          <i class="fas fa-heart"></i>
          <i class="fas fa-ellipsis-v"></i>
        </div>
      </div>
    <% }) %>
  <% } else { %>
    <p style="color: rgba(255,255,255,0.6); font-size:0.95rem;">No available songs</p>
  <% } %>
</div>


  <div class="section">
  <h2>Latest Albums</h2>
  <% if (artist.releases && artist.releases.length > 0) { %>
    <div class="releases-grid">
      <% artist.releases.forEach(release => { %>
        <a href="/album/<%= release.id %>" class="release-card-link">
          <div class="release-card">
            <img class="release-cover" src="<%= release.coverUrl %>" alt="<%= release.title %>">
            <div class="release-details">
              <div class="release-title-with-badge">
                <span class="release-title"><%= release.title %></span>
                <% if (release.explicit === 'Yes') { %>
                  <span class="explicit-e-badge">E</span>
                <% } %>
              </div>
              <% if (release.releasedOn) { %>
                <div class="release-meta">Released on <%= release.releasedOn %></div>
              <% } %>
            </div>
          </div>
        </a>
      <% }) %>
    </div>
  <% } else { %>
    <p style="color: rgba(255,255,255,0.6); font-size:0.95rem;">No available albums</p>
  <% } %>
</div>












  <div class="section">
    <h2>About</h2>
    <% if (artist.bio) { %>
      <div class="artist-details">
        <%= artist.bio %>
      </div>
    <% } %>
  </div>
</main>



<div class="fixed-bar">
  <%- include('partials/music_bar') %>
</div>

<script src="/js/profile.js"></script>
<script src="/js/music_bar.js"></script>



</body>
</html>
