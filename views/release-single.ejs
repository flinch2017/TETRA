<main class="releaseform" data-release-id="<%= releaseId %>" data-current-user="<%= currentUser %>">

  <form id="releaseForm">


    <div id="releaseWarnings" class="warning-box hidden"></div>

    <h3>Basic Info</h3>

    <div class="form-group hidden">
      <label>Release ID*</label>
      <input type="text" name="release_id" value="<%= releaseId %>">
    </div>
    

    <div class="form-group">
      <label>Artwork (PNG)*</label>
      <small class="form-note">
        Please ensure your artwork complies with our community guidelines. Non-compliant content may result in removal of your release and suspension of your account.
        <a href="/community-guidelines" class="guideline-link">See community guidelines</a>
      </small>
      <div class="artwork-upload" id="artworkUpload">
        <span class="plus-icon">+</span>
        <img id="artworkPreview" src="" alt="Artwork Preview" class="hidden" />
        <input type="file" name="art_url" id="artworkInput" accept="image/png" hidden>
      </div>
    </div>

    <div class="form-group">
      <label>Release Title*</label>
      <input type="text" name="release_title" required>
    </div>

    <div class="form-group hidden">
      <label>Released by*</label>
      <input type="text" name="acode" value="<%= currentUser %>" required>
    </div>


    <h3>Upload Tracks</h3>
    <div class="form-group">
    <label>
      Tracklist* 
      <span id="releaseTypeDisplay" class="release-type-display">(0 tracks)</span>
    </label>
    <div id="tracklistContainer" class="tracklist-container">
      <!-- tracks will appear here -->
    </div>
    <div class="add-track" id="addTrackBtn">
      <i class="fas fa-plus"></i>
    </div>
  </div>



    <h3>Creators & Rights</h3>
    <div class="form-group">
      <label>Copyright Holder*</label>
      <input type="text" name="copyright" required>
    </div>

    <div class="form-group">
      <label>Phonograph*</label>
      <input type="text" name="phonograph" required>
    </div>

    <div class="form-group">
      <label>Record Label (Optional)</label>
      <input type="text" name="record_label">
    </div>


    <h3>Technical & Release Details</h3>

    <div class="form-group">
      <label>UPC/EAN (If available)</label>
      <input type="text" name="upc">
    </div>

    <div class="form-group">
      <label>Musical Key (Optional)</label>
      <input type="text" name="musical_key">
    </div>

    <div class="form-group">
      <label>Canvas (Optional)</label>
      <div class="canvas-upload" id="canvasUpload">
        <span class="plus-icon">+</span>
        <video id="canvasPreview" class="hidden" muted loop></video>
        <input type="file" name="canvas_url" id="canvasInput" accept="video/mp4" hidden>
      </div>
      <small class="form-note">Upload an MP4 video (vertical 9:16) lasting between 3–8 seconds.</small>
    </div>

    <div class="form-group">
      <label>Release Date*</label>
      <input type="date" name="release_date" required>
    </div>

    <div class="form-group">
      <label>Release Time*</label>
      <input type="time" name="release_time" required>
    </div>

    <div class="form-group">
      <label>Timezone*</label>
      <select name="release_zone" class="timezone-select" required>
        <option value="" disabled selected hidden>Select Timezone</option>
        <option value="UTC">UTC</option>
        <option value="Etc/GMT+12">GMT-12:00 (International Date Line West)</option>
        <option value="Pacific/Honolulu">GMT-10:00 (Hawaii)</option>
        <option value="America/Anchorage">GMT-09:00 (Alaska)</option>
        <option value="America/Los_Angeles">GMT-08:00 (Pacific Time - US & Canada)</option>
        <option value="America/Denver">GMT-07:00 (Mountain Time - US & Canada)</option>
        <option value="America/Chicago">GMT-06:00 (Central Time - US & Canada)</option>
        <option value="America/New_York">GMT-05:00 (Eastern Time - US & Canada)</option>
        <option value="America/Sao_Paulo">GMT-03:00 (Brasilia)</option>
        <option value="Atlantic/Azores">GMT-01:00 (Azores)</option>
        <option value="Europe/London">GMT+00:00 (London)</option>
        <option value="Europe/Berlin">GMT+01:00 (Berlin, Rome, Paris)</option>
        <option value="Europe/Athens">GMT+02:00 (Athens, Bucharest)</option>
        <option value="Europe/Moscow">GMT+03:00 (Moscow, St. Petersburg)</option>
        <option value="Asia/Dubai">GMT+04:00 (Abu Dhabi, Dubai)</option>
        <option value="Asia/Karachi">GMT+05:00 (Islamabad, Karachi)</option>
        <option value="Asia/Dhaka">GMT+06:00 (Dhaka)</option>
        <option value="Asia/Bangkok">GMT+07:00 (Bangkok, Jakarta)</option>
        <option value="Asia/Shanghai">GMT+08:00 (Beijing, Hong Kong, Singapore)</option>
        <option value="Asia/Tokyo">GMT+09:00 (Tokyo, Seoul)</option>
        <option value="Australia/Sydney">GMT+10:00 (Sydney, Melbourne)</option>
        <option value="Pacific/Auckland">GMT+12:00 (Auckland, Wellington)</option>
        <option value="Asia/Manila">GMT+08:00 (Manila)</option>
      </select>
    </div>

    <button type="submit" class="submit-btn">Add Release</button>


    <div id="uploadProgressContainer" class="upload-progress hidden">
      <div id="uploadProgressBar" class="progress-bar">0%</div>
    </div>

  </form>
</main>


<div id="artistAlert" class="artist-alert hidden">
  ⚠ Please select an artist from the dropdown list only.
</div>
