<div class="editProf">
  <h1>Edit <%= user.accountMode === 'regular' ? 'Profile' : 'Artist Profile' %></h1>
  <div id="floatingMessage" class="floating-message hidden"></div>

  <form id="editArtistForm" enctype="multipart/form-data">
    <input type="hidden" name="acode" value="<%= user.acode %>">

    <!-- Username (Always Editable) -->
    <div>
      <label for="username">Username</label>
      <input type="text" id="username" name="username" value="<%= user.username || '' %>" required>
    </div>

    <% if (user.accountMode !== 'regular') { %>
      <!-- Artist-only Fields -->
      <div>
        <label for="artistName">Artist Name</label>
        <input type="text" id="artistName" name="artistName" value="<%= user.artistName || '' %>" required>
      </div>

      <div>
        <label for="genre">Main Genre</label>
        <select id="genre" name="genre" required>
          <option value="">Select genre</option>
          <option value="Pop" <%= user.genre === 'Pop' ? 'selected' : '' %>>Pop</option>
          <!-- other genres here... -->
          <option value="World" <%= user.genre === 'World' ? 'selected' : '' %>>World</option>
        </select>
      </div>

      <div>
        <label for="bio">About</label>
        <textarea id="bio" name="bio" rows="4" placeholder="Tell us about yourself..."><%= user.bio || '' %></textarea>
      </div>
    <% } %>

    <!-- Banner Upload (Always Editable) -->
    <div class="banner-upload">
      <h100>Profile Banner</h100>
      <label for="banner" class="banner-box">
        
        <% if (pfpUrl) { %>
          <img id="bannerPreview" src="<%= pfpUrl %>" alt="Profile Banner">
        <% } else { %>
          <div class="plus-icon">+</div>
          <img id="bannerPreview" style="display: none;" />
        <% } %>
      </label>
      <input type="file" id="banner" name="banner" accept="image/*" style="display: none;">
    </div>

    <button type="submit">Save Changes</button>
  </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const accountMode = "<%= user.accountMode %>";
    if (accountMode === 'regular') {
      document.getElementById('artistName')?.setAttribute('disabled', true);
      document.getElementById('genre')?.setAttribute('disabled', true);
      document.getElementById('bio')?.setAttribute('disabled', true);
    }
  });
</script>
